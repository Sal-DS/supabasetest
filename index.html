    <html lang="pt-br">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Consultar CPF</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    </head>
    <body>
        <div class="container-xl p-5 d-flex justify-content-center">
        <form class="col-5">

            <div class="text-center mb-3">
            <img src="Umbrella corporation.png" class="img-fluid" style="width: 28vw;" alt="Umbrella Emblem">  
            </div>

            <h3 class="text-center">CONSULTAR CPF</h3>

            <div class="mb-3">
                <label for="infrator" class="form-label">CPF</label>
                <input type="text" class="form-control" id="infrator" placeholder="Testa aÃ­: 1111111111">
            </div>

            <button type="button" id="consultarBtn" class="btn btn-danger w-100">Consultar</button>
            
            <div id="resultados" class="mt-3"></div>
        </form>  
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script>
            const { createClient } = window.supabase;
            const supabase = createClient(
            'https://urngqujxglxeaqnujuhq.supabase.co', 
            'sb_publishable_vCAXnk7vn5ylTIBvqzhGNg_PNiEvyDt'
            );
            console.log('Supabase Instance:', supabase);

            document.getElementById('consultarBtn').addEventListener('click', async () => {
            const infrator = document.getElementById('infrator').value.trim();

            if (!infrator) {
                alert('Por favor, digite o CPF do infrator.');
                return;
            }
            console.log(infrator)
            document.getElementById('resultados').innerHTML = '';

            try {
                const { data, error } = await supabase
                .from('infratores')
                .select('*')
                .eq('cpf', infrator);

                if (error) {
                console.error('Erro na consulta:', error);
                alert('Erro ao consultar dados.');
                } else {
                if (data.length > 0) {
                    let resultadoHTML = '<ul class="list-group">';
                    data.forEach(item => {
                    resultadoHTML += `
                        <li class="list-group-item">
                        <strong>Nome:</strong> ${item.nome}<br>
                        <strong>CPF:</strong> ${item.cpf}<br>
                        </strong>Crime</strong> ${item.crime}
                        </li>`;
                    });
                    resultadoHTML += '</ul>';
                    document.getElementById('resultados').innerHTML = resultadoHTML;
                } else {
                    document.getElementById('resultados').innerHTML = '<div class="alert alert-warning">Nenhum infrator encontrado.</div>';
                }
                }
            } catch (error) {
                console.error('Erro ao acessar o Supabase:', error);
                alert('Erro ao acessar o banco de dados.');
            }
            });
        </script>
    </body>
    </html>
